(function(e){function t(t){for(var s,i,o=t[0],u=t[1],c=t[2],d=0,m=[];d<o.length;d++)i=o[d],n[i]&&m.push(n[i][0]),n[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},n={app:0},a=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"22bf":function(e,t,r){},"497e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("744f"),r("6c7b"),r("7514"),r("20d6"),r("1c4c"),r("6762"),r("cadf"),r("e804"),r("55dd"),r("d04f"),r("c8ce"),r("217b"),r("7f7f"),r("f400"),r("7f25"),r("536b"),r("d9ab"),r("f9ab"),r("32d7"),r("25c9"),r("9f3c"),r("042e"),r("c7c6"),r("f4ff"),r("049f"),r("7872"),r("a69f"),r("0b21"),r("6c1a"),r("c7c62"),r("84b4"),r("c5f6"),r("2e37"),r("fca0"),r("7cdf"),r("ee1d"),r("b1b1"),r("87f3"),r("9278"),r("5df2"),r("04ff"),r("f751"),r("4504"),r("fee7"),r("ffc1"),r("0d6d"),r("9986"),r("8e6e"),r("25db"),r("e4f7"),r("b9a1"),r("64d5"),r("9aea"),r("db97"),r("66c8"),r("57f0"),r("165b"),r("456d"),r("cf6a"),r("fd24"),r("8615"),r("551c"),r("097d"),r("df1b"),r("2397"),r("88ca"),r("ba16"),r("d185"),r("ebde"),r("2d34"),r("f6b3"),r("2251"),r("c698"),r("a19f"),r("9253"),r("9275"),r("3b2b"),r("3846"),r("4917"),r("a481"),r("28a5"),r("386d"),r("6b54"),r("4f7f"),r("8a81"),r("ac4d"),r("8449"),r("9c86"),r("fa83"),r("48c0"),r("a032"),r("aef6"),r("d263"),r("6c37"),r("9ec8"),r("5695"),r("2fdb"),r("d0b0"),r("5df3"),r("b54a"),r("f576"),r("ed50"),r("788d"),r("14b9"),r("f386"),r("f559"),r("1448"),r("673e"),r("242a"),r("c66f"),r("b05c"),r("34ef"),r("6aa2"),r("15ac"),r("af56"),r("b6e4"),r("9c29"),r("63d9"),r("4dda"),r("10ad"),r("c02b"),r("4795"),r("130f"),r("ac6a"),r("96cf"),r("0cdd");var s=r("2b0e"),n=r("14ba"),a=r.n(n),i=r("1dce"),o=r.n(i),u=r("5f5b");r("ab8b"),r("2dd8");s["default"].use(u["a"]);var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n    "),r("router-link",{attrs:{to:"/editing0"}},[e._v("Editing")])],1),r("router-view")],1)},l=[],d=(r("f47f"),r("2877")),m={},f=Object(d["a"])(m,c,l,!1,null,"3a02b897",null),p=f.exports,h=r("8c4f"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Users",{attrs:{msg:"Welcome to Users"}})],1)},b=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"users"},[r("div",{staticClass:"container"},[r("h2",[e._v(e._s(e.msg))]),r("div",{staticClass:"row text-right"},[r("div",{staticClass:"col-12"},[r("router-link",{staticClass:"btn btn-success mb-2",attrs:{to:"/editing0"}},[e._v("Add users")])],1)]),r("table",{staticClass:"table table-hover"},[e._m(0),r("tbody",e._l(e.results,function(t,s){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(s+1))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.surname))]),r("td",[e._v(e._s(t.phone))]),r("td",[e._v(e._s(t.email))]),r("td",[r("button",{staticClass:"btn btn-danger",on:{click:function(r){return e.deleteUser(t.id)}}},[e._v("delete")])]),r("td",[r("button",{staticClass:"btn btn-primary",on:{click:function(r){return e.editUser(t.id)}}},[e._v("edit")])])])}),0)])])])},_=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),r("th",{attrs:{scope:"col"}},[e._v("name")]),r("th",{attrs:{scope:"col"}},[e._v("surname")]),r("th",{attrs:{scope:"col"}},[e._v("phone")]),r("th",{attrs:{scope:"col"}},[e._v("email")]),r("th",{attrs:{scope:"col"}},[e._v("-")]),r("th",{attrs:{scope:"col"}},[e._v("-")])])])}],$={name:"Users",props:{msg:String},methods:{getUsers:function(){this.$store.dispatch("getUsers")},deleteUser:function(e){var t=this;swal({title:"Удалить пользователя?",text:"Данные пользователя удаляются навсегда!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(r){r?(t.$store.dispatch("deleteUser",e),swal("Пользователь удален!",{icon:"success"})):swal("Отмена удаления")})},editUser:function(e){this.$router.push({name:"editing",params:{Pid:e}})},addUser:function(){this.$store.dispatch("addUser")}},computed:{results:function(){return this.$store.getters.results}},created:function(){this.getUsers()}},U=$,y=Object(d["a"])(U,g,_,!1,null,null,null),O=y.exports,x={name:"home",components:{Users:O}},j=x,w=Object(d["a"])(j,v,b,!1,null,null,null),C=w.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"editing"},[r("Form")],1)},S=[],E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-section"},[r("div",{staticClass:"container"},[r("h2",[e._v(e._s("0"===this.$route.params.Pid?"Add user":"Edit user "+this.$route.params.Pid))]),r("form",{staticClass:"form",attrs:{id:"form"},on:{submit:function(t){return t.preventDefault(),e.onSignup(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("Name *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",class:{"is-invalid":e.$v.user.name.$error},attrs:{type:"text",id:"name",placeholder:"Name",name:"name"},domProps:{value:e.user.name},on:{blur:function(t){return e.$v.user.name.$touch()},input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),e.$v.user.name.$error?r("div",{staticClass:"form-main__item-error error-text"},[e.$v.user.name.required?e._e():r("p",[e._v("Name is required")]),e.$v.user.name.minLength?e._e():r("p",[e._v("User name, should be 2-30 characters")])]):e._e()]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputSurname"}},[e._v("Surname *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.surname,expression:"user.surname"}],staticClass:"form-control",class:{"is-invalid":e.$v.user.surname.$error},attrs:{type:"text",id:"inputSurname",placeholder:"Surname",name:"surname"},domProps:{value:e.user.surname},on:{blur:function(t){return e.$v.user.surname.$touch()},input:function(t){t.target.composing||e.$set(e.user,"surname",t.target.value)}}}),e.$v.user.surname.$error?r("div",{staticClass:"form-main__item-error error-text"},[e.$v.user.surname.required?e._e():r("p",[e._v("Surname is required")]),e.$v.user.surname.minLength?e._e():r("p",[e._v("Surname, should be 2-30 characters")])]):e._e()]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPhone"}},[e._v("Phone *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.phone,expression:"user.phone"}],staticClass:"form-control",class:{"is-invalid":e.$v.user.phone.$error},attrs:{type:"tel",id:"inputPhone",placeholder:"Enter phone",name:"phone"},domProps:{value:e.user.phone},on:{blur:function(t){return e.$v.user.phone.$touch()},input:function(t){t.target.composing||e.$set(e.user,"phone",t.target.value)}}}),r("div",{staticClass:"form-main__item-error error-text"},[!e.$v.user.phone.required&&e.$v.user.phone.$error?r("p",[e._v("Phone is required")]):e._e(),e.$v.user.phone.minLength&&e.$v.user.phone.maxLength?e._e():r("p",[e._v("Phone, should be 2-30 characters")])])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail1"}},[e._v("Email address *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",class:{"is-invalid":e.$v.user.email.$error},attrs:{type:"email",id:"inputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",name:"email"},domProps:{value:e.user.email},on:{blur:function(t){return e.$v.user.email.$touch()},input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e.$v.user.email.$error?r("div",{staticClass:"form-main__item-error error-text"},[e.$v.user.email.required?e._e():r("p",[e._v("Email is required")]),e.$v.user.email.email?e._e():r("p",[e._v("Email is invalid")])]):e._e()]),r("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:!e.formIsValid}},[e._v(e._s("0"===this.$route.params.Pid?"Add user":"Edit user"))])]),r("br"),r("br"),r("form",{staticClass:"form",attrs:{id:"form-json"},on:{submit:function(t){return t.preventDefault(),e.onJsonSignup(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"textareaJson"}},[e._v("Import JSON:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.jsonUser,expression:"jsonUser"}],staticClass:"form-control",attrs:{name:"textareaJson",id:"textareaJson",cols:"20",rows:"7"},domProps:{value:e.jsonUser},on:{input:function(t){t.target.composing||(e.jsonUser=t.target.value)}}})]),e.errors.length?r("div",[e._m(0),r("ul",{staticClass:"text-danger"},e._l(e.errors,function(t){return r("li",{key:t},[e._v(e._s(t))])}),0)]):e._e(),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Import JSON")])]),r("br")])])},N=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"text-danger"},[r("b",[e._v("Пожалуйста исправьте указанные ошибки:")])])}],q=r("b5ae"),L=(r("3022"),r("3e8f"),{name:"Form",data:function(){return{errors:[],user:{id:null,name:null,surname:null,phone:null,email:null},jsonUser:'{"name": "name Json", "surname": "surname json", "phone": "09712388", "email": "testjson@ukr.net" }'}},props:{msg:String},validations:{user:{name:{required:q["required"],minLength:Object(q["minLength"])(2),maxLength:Object(q["maxLength"])(30)},surname:{required:q["required"],minLength:Object(q["minLength"])(2),maxLength:Object(q["maxLength"])(30)},email:{required:q["required"],email:q["email"]},phone:{required:q["required"],minLength:Object(q["minLength"])(2),maxLength:Object(q["maxLength"])(30)}}},computed:{formIsValid:function(){return!this.$v.$invalid},results:function(){return this.$store.getters.results}},methods:{onSignup:function(e){"0"===this.$route.params.Pid?this.addUser():this.editUser()},onJsonSignup:function(){var e;this.errors=[];try{e=JSON.parse(this.jsonUser)}catch(t){return void this.errors.push("Неверный формат JSON")}"[object Object]"!==Object.prototype.toString.call(e)&&this.errors.push("JSON не объект"),Object.prototype.hasOwnProperty.call(e,"name")&&(this.user.name=e.name),Object.prototype.hasOwnProperty.call(e,"surname")&&(this.user.surname=e.surname),Object.prototype.hasOwnProperty.call(e,"phone")&&(this.user.phone=e.phone),Object.prototype.hasOwnProperty.call(e,"email")&&(this.user.email=e.email)},addUser:function(){this.$store.dispatch("addUser",this.user),this.clearUser(),swal("Готово","Пользователь создан!","success"),this.$router.push({name:"home"})},editUser:function(){this.$store.dispatch("editUser",this.user),this.clearUser(),swal("Готово","Пользователь отредактирован!","success"),this.$router.push({name:"home"})},clearUser:function(){this.user={id:null,name:null,surname:null,phone:null,email:null}},getUserFromParams:function(){var e=this;if("0"!==this.$route.params.Pid){var t=this.$store.getters.results,r=t.filter(function(t){return t.id==e.$route.params.Pid});r.length&&r[0].id?this.user={id:r[0].id,name:r[0].name,surname:r[0].surname,phone:r[0].phone,email:r[0].email}:(swal("Неверный ИД пользователя","ИД не найден!","warning"),this.$router.push({name:"home"}))}}},created:function(){this.getUserFromParams()},watch:{$route:function(e,t){"0"==this.$route.params.Pid?this.user={id:null,name:null,surname:null,phone:null,email:null}:this.getUserFromParams()}}}),J=L,k=(r("ecaf"),Object(d["a"])(J,E,N,!1,null,"06a29895",null)),I=k.exports,F={name:"editing",components:{Form:I}},M=F,A=Object(d["a"])(M,P,S,!1,null,null,null),T=A.exports;s["default"].use(h["a"]);var D=new h["a"]({routes:[{path:"/",name:"home",component:C},{path:"/editing:Pid",name:"editing",component:T}]}),H=r("2f62");s["default"].use(H["a"]);var V="test-vue-5",W={fetch:function(){var e=JSON.parse(localStorage.getItem(V)||"[]");return e},save:function(e){localStorage.setItem(V,JSON.stringify(e))}},z=(W.fetch(),new H["a"].Store({state:{users:[]},getters:{results:function(e){return!e.users.length>0?[]:e.users.map(function(e){return e.name=e.name.toUpperCase(),e})},getNewId:function(e){if(0===e.users.length)return 1;var t=e.users.reduce(function(e,t){return e.id<t.id?t:e}).id+1;return t},user:function(e){return e.user}},mutations:{set:function(e,t){var r=t.type,s=t.items;e[r]=s},addUser:function(e,t){e.users.push(t)},updateUser:function(e,t){var r=e.users.findIndex(function(e){return e.id===e.id});-1!==r&&e.users.splice(r,1,t)},deleteUser:function(e,t){e.users=e.users.filter(function(e){return e.id!==t})}},actions:{getUsers:function(e){e.state,e.dispatch;var t=e.commit,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],W.fetch());t("set",{type:"users",items:r})},deleteUser:function(e,t){var r=e.state,s=(e.dispatch,e.commit),n=r.users.filter(function(e){return e.id!==t});W.save(n),s("deleteUser",t)},editUser:function(e,t){var r=e.state,s=(e.dispatch,e.commit),n=r.users.slice();n.forEach(function(e){e.id===t.id&&Object.assign(e,t)}),W.save(n),s("updateUser",t)},addUser:function(e,t){var r=e.state,s=(e.dispatch,e.commit),n=Object.assign({},t);n.id=this.getters.getNewId;var a=r.users.slice();a.push(n),W.save(a),s("addUser",n)}}}));s["default"].use(a.a),s["default"].use(o.a),s["default"].config.productionTip=!1,new s["default"]({router:D,store:z,render:function(e){return e(p)}}).$mount("#app")},ecaf:function(e,t,r){"use strict";var s=r("22bf"),n=r.n(s);n.a},f47f:function(e,t,r){"use strict";var s=r("497e"),n=r.n(s);n.a}});
//# sourceMappingURL=app.73c8900f.js.map